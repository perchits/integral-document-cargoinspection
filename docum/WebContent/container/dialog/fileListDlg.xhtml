<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui">

<p:outputPanel id="#{gridId}DlgPanel">
	<h:form prependId="false" enctype="multipart/form-data"
		rendered="#{rendered == null ? true : rendered}">
		<p:dialog width="780" id="#{gridId}Id" widgetVar="#{gridId}Var"
			modal="true" header="#{bean[title]}">

			<h:panelGrid columns="2" width="100%"
				columnClasses="upload-dlg-left-col,upload-dlg-right-col">

				<h:panelGroup layout="block" id="upload-dlg-left">
				<h:outputText value="Изображения отсутствуют..." rendered="#{empty bean.fileUrls}"/>
					<p:lightBox opacity="0.4" height="480" width="640">
						<h:dataTable value="#{bean.fileUrls}" var="furl">
							<h:column>

								<h:outputLink
									value="#{facesContext.externalContext.requestContextPath}/images/#{furl.value}">
									<p:graphicImage width="40" value="/images/#{furl.value}" />
								</h:outputLink>

							</h:column>
							<h:column>
								<p:commandButton value="OK"></p:commandButton>
							</h:column>

						</h:dataTable>
					</p:lightBox>

				</h:panelGroup>


				<h:panelGroup id="upload-dlg-right" layout="block">

					<p:fileUpload mode="advanced" cancelLabel="Отмена"
						uploadLabel="Загрузить" multiple="true" auto="false"
						label="Добавить фотографии"
						fileUploadListener="#{bean.uploadImages}"
						update="growl,upload-dlg-right,infoPanel" customUI="false"
						allowTypes="gif|GIF|png|PNG|jpg|JPG|jpeg|JPEG">
					</p:fileUpload>

				</h:panelGroup>
			</h:panelGrid>

		</p:dialog>
	</h:form>
</p:outputPanel>

</html>