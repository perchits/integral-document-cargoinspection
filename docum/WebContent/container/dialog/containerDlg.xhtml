<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui">

<ui:composition template="/WEB-INF/includes/dialogLayout.xhtml">
	<ui:param name="width" value="880" />
	<ui:param name="saveObject" value="save" />
	<ui:param name="deleteObject" value="deleteObject" />
	<ui:param name="colCount" value="1" />
	<ui:define name="dialogBody">
		<h:panelGrid id="container-top-info" width="100%" columns="1"
			cellpadding="0" styleClass="container-top-info">

			<h:panelGrid width="100%" columns="6" cellpadding="2"
				columnClasses=",,left-space,,left-space">
				<h:outputLabel for="containerNumber" value="Номер: *" />
				<p:inputText value="#{bean.container.number}" id="containerNumber"
					required="true" label="Номер" />

				<h:outputLabel for="containerState" value="Статус: *" />
				<h:selectOneMenu id="containerState"
					styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
					value="#{bean.container.state}">
					<f:selectItems value="#{bean.containerStates}" var="containerState"
						itemLabel="#{containerState.name}" />
				</h:selectOneMenu>

				<h:outputLabel for="city" value="Город:" />

				<h:selectOneMenu id="city" label="Город"
					styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
					value="#{bean.container.city}">
					<f:converter converterId="cityConverter" />
					<f:selectItems value="#{bean.cities}" var="city"
						itemLabel="#{city.name}" />
				</h:selectOneMenu>
			</h:panelGrid>
			<h:panelGrid width="100%" columns="4" cellpadding="2"
				columnClasses=",,left-space">

				<h:outputLabel for="loadingPort" value="Порт погрузки:" />

				<h:selectOneMenu id="loadingPort" label="Порт погрузки"
					styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
					value="#{bean.container.loadingPort}">
					<f:converter converterId="portConverter" />
					<f:selectItem itemLabel="Выберите порт погрузки..." itemValue=""
						noSelectionOption="true" itemDisabled="true" />
					<f:selectItems value="#{bean.ports}" var="port"
						itemLabel="#{port.name}" />
				</h:selectOneMenu>

				<h:outputLabel for="loadingDate" value="Дата погрузки:" />
				<p:calendar value="#{bean.container.loadingDate}" id="loadingDate"
					label="Дата погрузки" pattern="dd.MM.yyyy" />
			</h:panelGrid>
			<h:panelGrid width="100%" columns="4" cellpadding="2"
				columnClasses=",,left-space">

				<h:outputLabel for="dischargePort" value="Порт выгрузки:" />
				<h:selectOneMenu id="dischargePort" label=""
					styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
					value="#{bean.container.dischargePort}">
					<f:converter converterId="portConverter" />
					<f:selectItem itemLabel="Выберите порт выгрузки..." itemValue=""
						noSelectionOption="true" itemDisabled="true" />
					<f:selectItems value="#{bean.ports}" var="port"
						itemLabel="#{port.name}" />
				</h:selectOneMenu>

				<h:outputLabel for="dischargeDate" value="Дата выгрузки:" />
				<p:calendar value="#{bean.container.dischargeDate}"
					id="dischargeDate" label="Дата выгрузки" pattern="dd.MM.yyyy" />

			</h:panelGrid>

		</h:panelGrid>

		<p:tabView styleClass="container-tab">
			<p:tab title="Документы">
				<h:panelGrid columns="2" cellpadding="2"
					styleClass="container-docum">
					<h:panelGroup>
						<p:panel header="Инвойсы">
							<ui:include src="/container/dialog/selectInvoice.xhtml" />
						</p:panel>
						<p:panel header="Заказы" style="margin-top : 6px">
							<ui:include src="/container/dialog/selectOrder.xhtml" />
						</p:panel>
					</h:panelGroup>
					<p:panel header="Коносаменты">
						<ui:include src="/container/dialog/selectBill.xhtml" />
					</p:panel>

				</h:panelGrid>
			</p:tab>
			<p:tab title="Состояние по документам">
				<p:commandButton value="validate" update="growl" />
				<h:panelGrid columns="2" cellpadding="2"
					styleClass="container-cargo">
					<p:dataTable selectionMode="single" id="cargo-list"
						value="#{bean.container.cargoes}" var="wcargo"
						selection="#{bean.cargo}" update="cargo-info,growl">
						<p:column>
							<f:facet name="header">
								<h:panelGroup styleClass="table-title">Товар</h:panelGroup>
								<h:panelGroup styleClass="table-btns" id="table-btns">
									<p:commandButton image="ui-icon-plusthick" process="table-btns"
										actionListener="#{bean.addCargo}"
										update="cargo-list,cargo-info" />
									<p:commandButton image="ui-icon-minusthick"
										process="table-btns" actionListener="#{bean.deleteCargo}"
										update="cargo-list,cargo-info" />
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{wcargo.article.name}" />
							<h:outputText rendered="#{wcargo.articleCategory.name != null}"
								value=", " />
							<h:outputText value="#{wcargo.articleCategory.name}" />
						</p:column>
					</p:dataTable>


					<h:panelGroup id="cargo-info" layout="block">
						<p:panel rendered="#{bean.cargo != null}"
							styleClass="container-dlg-cargo-panel">

							<h:selectOneMenu id="article" label="Товары"
								styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
								value="#{bean.cargo.article}">
								<f:converter converterId="articleConverter" />
								<f:selectItem itemLabel="Выберите товар..." itemValue=""
									noSelectionOption="true" itemDisabled="true" />
								<f:selectItems value="#{bean.articles}" var="article"
									itemLabel="#{article.name}" />
								<p:ajax update="articleCategory,cargo-list"
									listener="#{bean.articleChange}" />
							</h:selectOneMenu>

							<p:outputPanel id="articleCategory">
								<h:selectOneMenu label="Категории"
									styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
									value="#{bean.cargo.articleCategory}">
									<f:converter converterId="articleCategoryConverter" />
									<f:selectItem itemLabel="Выберите категорию..." itemValue=""
										noSelectionOption="true" itemDisabled="true" />
									<f:selectItems value="#{bean.articleCategories}" var="artcat"
										itemLabel="#{artcat.name}" />
									<p:ajax update="cargo-list" />
								</h:selectOneMenu>
							</p:outputPanel>
							<h:outputText styleClass="olive-color" value="Поставщик: " />
							<h:selectOneMenu label="Поставщик" required="true"
								styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
								value="#{bean.cargo.supplier}">
								<f:converter converterId="supplierConverter" />
								<f:selectItem itemLabel="Выберите поставщика..." itemValue=""
									noSelectionOption="true" itemDisabled="true" />
								<f:selectItems value="#{bean.suppliers}" var="supplier"
									itemLabel="#{supplier.company.name}" />
								<p:ajax update="cargo-list" />
							</h:selectOneMenu>

							<!-- 
							<ul>
								<ui:repeat value="#{wcargo.features}" var="feature">
									<li><h:outputText styleClass="olive-color"
											value="#{feature.feature.name}: " /> <h:outputText
											value="#{feature.value}" />
									</li>
								</ui:repeat>
							</ul> -->

						</p:panel>
					</h:panelGroup>

				</h:panelGrid>
			</p:tab>
			<p:tab title="Состояние по инспекции">
			</p:tab>
		</p:tabView>
	</ui:define>

</ui:composition>

</html>