<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui">

<ui:composition template="/WEB-INF/includes/layout.xhtml">
	<ui:param name="selectedMenuItem" value="4" />
	<f:metadata>
		<f:event type="preRenderView" listener="#{containerBean.loadPage}"></f:event>
	</f:metadata>
	<ui:define name="content">
		<h:form prependId="false">
			<h:panelGrid columns="2" styleClass="containersLayoutTable"
				id="voyagesLayoutTable">

				<p:panel id="containersPanel" style="text-align:center"
					styleClass="toggle-panel">
					<f:facet name="header">
						<h:outputText id="containerTitle"
							value="#{containerBean.containersTitle}" />
					</f:facet>
					<p:autoComplete id="VoyageSearchBoxId"
						value="#{containerBean.selectedVoyage}"
						completeMethod="#{containerBean.voyageAutocomplete}" var="voyage"
						itemValue="#{voyage}" itemLabel="#{voyage.voyageInfo}"
						forceSelection="true" converter="voyagePresentationConverter"
						selectListener="#{containerBean.voyageSelect}"
						onSelectUpdate="containers,infoPanel,containerTitle"
						style="width: 200px !important;">
					</p:autoComplete>

					<ui:include src="/WEB-INF/includes/baseCrudToolBar.xhtml">
						<ui:param name="bean" value="#{containerBean}" />
						<ui:param name="gridId" value="containers" />
						<ui:param name="update" value="infoPanel" />
						<ui:param name="newObject" value="newObject" />
						<ui:param name="editObject" value="editObject" />
						<ui:param name="beforeDeleteObject" value="beforeDeleteObject" />
						<ui:param name="refreshObjects" value="refreshObjects" />
						<ui:param name="inspectionBrief" value="true" />
					</ui:include>

					<p:dataTable selectionMode="single" styleClass="cellSmallText"
						id="containers" var="container"
						value="#{containerBean.containers}"
						selection="#{containerBean.container}"
						rowStyleClass="#{container.color}" update="infoPanel">

						<p:column sortBy="#{container.number}"
							filterBy="#{container.number}" filterMatchMode="contains">
							<f:facet name="header">Номер</f:facet>
							<h:outputText value="#{container.number}" />
						</p:column>

						<p:column sortBy="#{container.invoiceInLine}"
							filterBy="#{container.invoiceInLine}" filterMatchMode="contains">
							<f:facet name="header">Инвойс</f:facet>
							<h:outputText value="#{container.invoiceInLine}" />
						</p:column>

						<p:column sortBy="#{container.orderInLine}"
							filterBy="#{container.orderInLine}" filterMatchMode="contains">
							<f:facet name="header">Заказ</f:facet>
							<h:outputText value="#{container.orderInLine}" />
						</p:column>

						<p:column sortBy="#{container.billOfLadingInLine}"
							filterBy="#{container.billOfLadingInLine}"
							filterMatchMode="contains">
							<f:facet name="header">Коносамент</f:facet>
							<h:outputText value="#{container.billOfLadingInLine}" />
						</p:column>

						<p:column sortBy="#{container.cargoInLine}"
							filterBy="#{container.cargoInLine}" filterMatchMode="contains">
							<f:facet name="header">Груз</f:facet>
							<h:outputText value="#{container.cargoInLine}" />
						</p:column>

						<p:column sortBy="#{container.city}" filterBy="#{container.city}"
							filterMatchMode="contains">
							<f:facet name="header">Город</f:facet>
							<h:outputText value="#{container.city}" />
						</p:column>

						<p:column sortBy="#{container.state}"
							filterBy="#{container.state}">
							<f:facet name="header">Статус</f:facet>
							<h:outputText value="#{container.state}" />
						</p:column>

					</p:dataTable>

				</p:panel>
				<h:panelGroup id="infoPanel" layout="block">
					<ui:include src="/container/include/cargoUnit.xhtml">
						<ui:param name="cargobean" value="#{containerBean.cargoUnit}" />
					</ui:include>
				</h:panelGroup>
			</h:panelGrid>

		</h:form>

		<!-- Контейнер  -->

		<ui:include src="/container/dialog/containerDlg.xhtml">
			<ui:param name="bean" value="#{containerBean.containerDlg}" />
			<ui:param name="gridId" value="containers" />
			<ui:param name="title" value="title" />
			<ui:param name="update" value="infoPanel" />
			<ui:param name="rendered"
				value="#{containerBean.containerDlg != null}" />
		</ui:include>

		<ui:include src="/WEB-INF/includes/deleteConfirmation.xhtml">
			<ui:param name="message"
				value="Удалить контейнер '#{containerBean.container.number}'?" />
			<ui:param name="gridId" value="containers" />
			<ui:param name="bean" value="#{containerBean}" />
			<ui:param name="update" value="infoPanel" />
			<ui:param name="deleteObject" value="deleteObject" />
		</ui:include>

		<!-- Груз  -->

		<ui:include src="/container/dialog/cargoDlg.xhtml">
			<ui:param name="bean" value="#{containerBean.cargoUnit.cargoDlg}" />
			<ui:param name="gridId" value="infoPanel" />
			<ui:param name="title" value="title" />
			<ui:param name="rendered"
				value="#{containerBean.cargoUnit.cargoDlg != null}" />
			<ui:param name="update" value="containers" />
		</ui:include>

		<ui:include src="/WEB-INF/includes/deleteConfirmation.xhtml">
			<ui:param name="message"
				value="Удалить груз '#{containerBean.cargoUnit.cargoName}'?" />
			<ui:param name="gridId" value="infoPanel" />
			<ui:param name="bean" value="#{containerBean.cargoUnit}" />
			<ui:param name="deleteObject" value="deleteCargo" />
			<ui:param name="update" value="containers" />
		</ui:include>

		<!-- Категории  -->

		<ui:include src="/container/dialog/featureDlg.xhtml">
			<ui:param name="bean"
				value="#{containerBean.cargoFeatureUnit.featureDlg}" />
			<ui:param name="gridId" value="featureId" />
			<ui:param name="title" value="title" />
			<ui:param name="rendered"
				value="#{containerBean.cargoFeatureUnit.featureDlg != null}" />
			<ui:param name="update" value="infoPanel" />
		</ui:include>

		<ui:include src="/WEB-INF/includes/deleteConfirmation.xhtml">
			<ui:param name="message"
				value="Удалить свойство груза '#{containerBean.cargoFeatureUnit.featureName}'?" />
			<ui:param name="gridId" value="featureId" />
			<ui:param name="bean" value="#{containerBean.cargoFeatureUnit}" />
			<ui:param name="deleteObject" value="removeFeature" />
			<ui:param name="update" value="infoPanel" />
		</ui:include>

		<!-- Упаковка  -->

		<ui:include src="/container/dialog/CargoPackageDlg.xhtml">
			<ui:param name="bean" value="#{containerBean.cargoPackageUnit.cargoPackageDlg}" />
			<ui:param name="gridId" value="packageId" />
			<ui:param name="title" value="title" />
			<ui:param name="rendered"
				value="#{containerBean.cargoPackageUnit.cargoPackageDlg != null}" />
			<ui:param name="update" value="infoPanel" />
		</ui:include>

		<ui:include src="/WEB-INF/includes/deleteConfirmation.xhtml">
			<ui:param name="message"
				value="Удалить упаковку «#{containerBean.cargoPackageUnit.packageName}»?" />
			<ui:param name="gridId" value="packageId" />
			<ui:param name="bean" value="#{containerBean.cargoPackageUnit}" />
			<ui:param name="deleteObject" value="removePackage" />
			<ui:param name="update" value="infoPanel" />
		</ui:include>

		<!-- Калибры  -->

		<ui:include src="/container/dialog/calibreDlg.xhtml">
			<ui:param name="bean" value="#{containerBean.calibreUnit.calibreDlg}" />
			<ui:param name="gridId" value="calibreId" />
			<ui:param name="title" value="title" />
			<ui:param name="rendered" value="#{containerBean.calibreUnit.calibreDlg != null}" />
			<ui:param name="update" value="infoPanel" />
		</ui:include>

		<ui:include src="/WEB-INF/includes/deleteConfirmation.xhtml">
			<ui:param name="message"
				value="Удалить калибр '#{containerBean.calibreUnit.calibre.calibreValue}'?" />
			<ui:param name="gridId" value="calibreId" />
			<ui:param name="bean" value="#{containerBean.calibreUnit}" />
			<ui:param name="deleteObject" value="removeCalibre" />
			<ui:param name="update" value="infoPanel" />
		</ui:include>

		<!-- Инспекция  -->

		<ui:include src="/container/dialog/inspectionBriefDlg.xhtml">
			<ui:param name="bean" value="#{containerBean}" />
		</ui:include>

	</ui:define>

</ui:composition>
</html>