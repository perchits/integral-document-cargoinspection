<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui">

<ui:composition template="/WEB-INF/includes/layout.xhtml">
	<ui:define name="content">
		<h:panelGrid columns="5" styleClass="voyagesLayoutTable">
			<h:form prependId="false">
				<p:panel id="voyagesPanel" header="Судозаходы"
					style="text-align:center" styleClass="toggle-panel">
					<ui:include src="/WEB-INF/includes/crudToolBar.xhtml">
						<ui:param name="bean" value="#{voyageBean}" />
						<ui:param name="dataTableId" value="voyages" />
					</ui:include>
					<p:dataTable id="voyages" var="voyage"
						value="#{voyageBean.allObjects}" selectionMode="single"
						selection="#{voyageBean.voyage}"
						update="purchaseOrdersPanel">
						<p:column sortBy="#{voyage.vessel.name}"
							filterBy="#{voyage.vessel.name}" filterMatchMode="contains">
							<f:facet name="header">
							Судно 
						</f:facet>
							<h:outputText value="#{voyage.vessel.name}" />
						</p:column>
						<p:column sortBy="#{voyage.number}" filterBy="#{voyage.number}"
							filterMatchMode="contains">
							<f:facet name="header">
							Рейс  
						</f:facet>
							<h:outputText value="#{voyage.number}" />
						</p:column>
						<p:column sortBy="#{voyage.arrivalDate}"
							filterBy="#{voyage.arrivalDate}" filterMatchMode="contains">
							<f:facet name="header">
							Дата прибытия  
						</f:facet>
							<h:outputText value="#{voyage.arrivalDate}">
								<f:convertDateTime dateStyle="medium" type="date" />
							</h:outputText>
						</p:column>
					</p:dataTable>
				</p:panel>
				<p:panel id="purchaseOrdersPanel" header="Заказы"
					style="text-align:center">
					<p:dataTable id="purchaseOrders" var="order"
						value="#{voyageBean.orders}">
						<p:column sortBy="#{order.number}"
							filterBy="#{order.number}" filterMatchMode="contains">
							<h:outputText value="#{order.number}" />
						</p:column>
					</p:dataTable>
				</p:panel>
			</h:form>
			
			
			<h:form>
				<p:panel id="invoicePanel" header="Инвойсы"
					style="text-align:center">
					<p:dataTable id="invoices" var="voyage"
						value="#{voyageBean.allObjects}" selectionMode="single"
						selection="#{voyageBean.voyage}">
						<p:column sortBy="#{voyage.vessel.name}"
							filterBy="#{voyage.vessel.name}" filterMatchMode="contains">
						
							<h:outputText value="#{voyage.vessel.name}" />
						</p:column>
					</p:dataTable>
				</p:panel>
			</h:form>
			
				<h:form>
				<p:panel id="billOfLadingPanel" header="Коносаменты"
					style="text-align:center">
					<p:dataTable id="billOfLadings" var="voyage"
						value="#{voyageBean.allObjects}" selectionMode="single"
						selection="#{voyageBean.voyage}">
						<p:column sortBy="#{voyage.vessel.name}"
							filterBy="#{voyage.vessel.name}" filterMatchMode="contains">
					
							<h:outputText value="#{voyage.vessel.name}" />
						</p:column>
					</p:dataTable>
				</p:panel>
			</h:form>
			
			<h:form>
				<p:panel id="containerPanel" header="Контейнеры"
					style="text-align:center">
					<p:dataTable id="containers" var="voyage"
						value="#{voyageBean.allObjects}" selectionMode="single"
						selection="#{voyageBean.voyage}">
						<p:column sortBy="#{voyage.vessel.name}"
							filterBy="#{voyage.vessel.name}" filterMatchMode="contains">
					
							<h:outputText value="#{voyage.vessel.name}" />
						</p:column>
					</p:dataTable>
				</p:panel>
			</h:form>
			
		</h:panelGrid>

		<p:outputPanel id="dialogPanel">
			<h:form prependId="false">
				<p:dialog width="340" id="dialog" widgetVar="dialog" modal="true"
					header="#{voyageBean.title}">
					<p:outputPanel id="dialogContent">
						<h:panelGroup>

							<h:panelGrid width="100%" columns="2" cellpadding="5">
								<h:outputLabel for="voyageVessel" value="Судно: *" />
								<h:selectOneMenu id="voyageVessel"
									styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all"
									value="#{voyageBean.selectedVessel}">
									<f:converter converterId="vesselConverter" />
									<f:selectItem itemLabel="Выберите судно..." itemValue=""
										noSelectionOption="true" itemDisabled="true" />
									<f:selectItems value="#{voyageBean.vessels}" var="vsls"
										itemLabel="#{vsls.name}" />
								</h:selectOneMenu>
								<h:outputLabel for="voyageNumber" value="Рейс: *" />
								<p:inputText size="30" value="#{voyageBean.voyage.number}"
									id="voyageNumber" required="true" label="Рейс" />

								<h:outputLabel for="voyageArrivalDate" value="Дата прибытия:" />
								<p:calendar value="#{voyageBean.voyage.arrivalDate}"
									id="voyageArrivalDate" label="Дата прибытия"
									pattern="dd.MM.yyyy" />

								<h:outputLabel for="voyageFinished" value="Завершено:" />
								<h:selectBooleanCheckbox size="30"
									value="#{voyageBean.voyage.finished}" id="voyageFinished"
									label="Завершено">
								</h:selectBooleanCheckbox>

								<f:facet name="footer">
									<p:commandButton actionListener="#{voyageBean.saveObject}"
										value="OK" update="voyages,growl"
										oncomplete="handleOKRequest(args,dialog,'dialog')" />
									<p:commandButton type="reset" value="Отмена" update="growl"
										onclick="dialog.hide()" />

								</f:facet>
							</h:panelGrid>

						</h:panelGroup>
					</p:outputPanel>
				</p:dialog>
			</h:form>
		</p:outputPanel>


		<ui:include src="/WEB-INF/includes/confirmation.xhtml">
			<ui:param name="bean" value="#{voyageBean}" />
			<ui:param name="message"
				value="Удалить судозаход '#{voyageBean.voyage.number}'?" />
		</ui:include>

		<h:outputScript name="dialog.js" library="js" />

	</ui:define>
</ui:composition>
</html>